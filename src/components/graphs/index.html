import React, { useState, useRef, useEffect } from 'react';

function CircleCanvas() {
  const [circles, setCircles] = useState([]);
  const [selectedCircle, setSelectedCircle] = useState(null);
  const [offsetX, setOffsetX] = useState(0);
  const [offsetY, setOffsetY] = useState(0);
  const canvasRef = useRef(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');

    function drawCircle(circle) {
      ctx.beginPath();
      ctx.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
      ctx.fillStyle = circle.color;
      ctx.fill();
    }

    function drawLine(startX, startY, endX, endY) {
      ctx.beginPath();
      ctx.moveTo(startX, startY);
      ctx.lineTo(endX, endY);
      ctx.stroke();
    }

    function draw() {
      // Clear the canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the circles
      circles.forEach(circle => drawCircle(circle));

      // Draw the lines between circles
      circles.forEach(startCircle => {
        startCircle.connections.forEach(endCircle => {
          drawLine(startCircle.x, startCircle.y, endCircle.x, endCircle.y);
        });
      });

      // Move the circles
      setCircles(circles => {
        return circles.map(circle => {
          const dx = Math.random() * 2 - 1;
          const dy = Math.random() * 2 - 1;
          const newX = circle.x + dx;
          const newY = circle.y + dy;

          if (newX < circle.r) {
            circle.x = circle.r;
          } else if (newX > canvas.width - circle.r) {
            circle.x = canvas.width - circle.r;
          } else {
            circle.x = newX;
          }

         
